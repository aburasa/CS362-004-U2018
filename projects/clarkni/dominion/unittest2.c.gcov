        -:    0:Source:unittest2.c
        -:    0:Graph:unittest2.gcno
        -:    0:Data:unittest2.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:/*/* CS362 - Assignment 3
        -:    2: * unittest1.c --> UpdateCoins()
        -:    3: */
        -:    4:
        -:    5:#include "dominion.h"
        -:    6:#include "dominion_helpers.h"
        -:    7:#include <string.h>
        -:    8:#include <stdio.h>
        -:    9:#include <assert.h>
        -:   10:#include "rngs.h"
        -:   11:
        -:   12:
        -:   13://count of test failures - global count
        -:   14:int failuresCount = 0;
        -:   15:
        -:   16://own asserttrue function
function assertTrue called 3 returned 100% blocks executed 80%
        3:   17:void assertTrue(int a, int b){
        3:   18:	if (a == b)
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
    #####:   19:		printf("Test: PASS");
call    0 never executed
        -:   20:	else {
        3:   21:		printf("Test: FAIL\n");
call    0 returned 100%
        3:   22:		failuresCount++;
        -:   23:	}
        3:   24:}
        -:   25:
        -:   26://main function to run tests
function main called 1 returned 100% blocks executed 95%
        1:   27:int main(){
        -:   28:
        1:   29:	printf("*************TESTING updateCoins Function*****************\n");
call    0 returned 100%
        -:   30:
        -:   31:	struct gameState game;
        1:   32:	int numPlayers = 2;
        1:   33:	int player = 0;
        -:   34:	int handCount;
        -:   35:	//kingdom cards
        1:   36:	int k[10] = {adventurer, smithy, great_hall, council_room, 
        -:   37:				 embargo, steward, feast, baron, village, gardens};
        -:   38:
        1:   39:	int seed = 2000;
        1:   40:	int bonus = 1;
        -:   41:	int expected, actual;
        -:   42:
        -:   43:	int coppers[MAX_HAND];
        -:   44:	int silvers[MAX_HAND];
        -:   45:	int golds[MAX_HAND];
        -:   46:
        -:   47:	//array to hold treasure
      501:   48:	for (int i = 0; i< MAX_HAND; i++){
branch  0 taken 99%
branch  1 taken 1% (fallthrough)
      500:   49:		coppers[i] = copper;
      500:   50:		silvers[i] = silver;
      500:   51:		golds[i] = gold;
        -:   52:	}
        -:   53:
        -:   54:	// test how updateCoins handles each treasure card, bonus and hand count
        3:   55:    for (handCount = 0; handCount <= 5; handCount = handCount + 5) {
branch  0 taken 67%
branch  1 taken 33% (fallthrough)
        2:   56:        printf("\nTreasure cards: %d\n",handCount);
call    0 returned 100%
        2:   57:        printf("Bonus: %d\n", bonus);
call    0 returned 100%
        -:   58:}
        1:   59:	printf("Testing for updateCoins()\n");
call    0 returned 100%
        -:   60:
        -:   61:	//initialize game with 2 players with seed of 2000
        -:   62:
        1:   63:	initializeGame(numPlayers, k, seed, &game);
call    0 returned 100%
        -:   64:
        1:   65:	printf("Test 1: standard initial game state for player 0, with no bonus, coins should be 4\n");
call    0 returned 100%
        1:   66:	expected = 4;
        1:   67:	updateCoins(player, &game, bonus);
call    0 returned 100%
        1:   68:	actual = game.coins;
        1:   69:	printf("Does the initial hand consist of 4 coins?\n");
call    0 returned 100%
        1:   70:	printf("actual is %d\n", game.coins);
call    0 returned 100%
        1:   71:	printf("%s", (actual == expected) ? "PASS" : "FAIL");
branch  0 taken 0% (fallthrough)
branch  1 taken 100%
call    2 returned 100%
        1:   72:	printf("\n");
call    0 returned 100%
        -:   73:	
        -:   74:
        -:   75:	//changing player 0 to 1 gold, 1 silver and 2 copper.  Give 1 bonus
        1:   76:	game.hand[player][0] = gold;
        1:   77:	game.hand[player][1] = silver;
        1:   78:	bonus = 1;
        -:   79:
        1:   80:	printf("\nTest 2: expect the coins to be updated to 8\n");
call    0 returned 100%
        1:   81:	expected = 8;
        1:   82:	updateCoins(player, &game, bonus);
call    0 returned 100%
        1:   83:	actual = game.coins;
        1:   84:	printf("actual is %d\n", game.coins);
call    0 returned 100%
        1:   85:	printf("Did the Update coins increase to 8 for the second hand?\n");
call    0 returned 100%
        1:   86:	printf("%s", (actual == expected) ? "PASS" : "FAIL");
branch  0 taken 100% (fallthrough)
branch  1 taken 0%
call    2 returned 100%
        1:   87:	printf("\n");
call    0 returned 100%
        -:   88:
        1:   89:	printf("\nTest 3: Copper coins count,\n");
call    0 returned 100%
        1:   90:	printf("actual in copper is %d\n", game.coins);
call    0 returned 100%
        1:   91:	printf("expected in copper is %d\n", handCount*1+bonus);
call    0 returned 100%
        1:   92:	assertTrue(game.coins,handCount*1+bonus);
call    0 returned 100%
        -:   93:
        -:   94:
        1:   95:	printf("\nTest 4: Silver coins count,\n");
call    0 returned 100%
        1:   96:	printf("actual in silver is %d\n", game.coins);
call    0 returned 100%
        1:   97:	printf("expected in silver is %d\n", handCount*2+bonus);
call    0 returned 100%
        1:   98:	assertTrue(game.coins,handCount*2+bonus);
call    0 returned 100%
        -:   99:
        1:  100:	printf("\nTest 5: Gold coins count,\n");
call    0 returned 100%
        1:  101:	printf("actual in gold is %d\n", game.coins);
call    0 returned 100%
        1:  102:	printf("expected in gold is %d\n", handCount*3+bonus);
call    0 returned 100%
        1:  103:	assertTrue(game.coins,handCount*3+bonus);
call    0 returned 100%
        -:  104:
        1:  105:	printf("\n*** TESTING COMPLETED  *** \n ");
call    0 returned 100%
        -:  106:
        1:  107:	return 0;
        -:  108:
        -:  109:}
        -:  110:
        -:  111:
